<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Leo Launcher</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap&subset=latin,cyrillic" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500&display=swap&subset=latin,cyrillic" rel="stylesheet" />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="app-shell">
      <nav class="side-nav">
        <div class="brand">
          <div class="brand-icon">
            <img src="assets/mat.ico" alt="Leo icon" />
          </div>
          <div>
            <p class="brand-title">LeoLauncher</p>
            <p class="brand-version" id="appVersion">Версия —</p>
          </div>
        </div>
        <ul class="menu" id="menu">
          <li class="active" data-panel="play">Играть</li>
          <li data-panel="mods">Моды</li>
          <li data-panel="settings">Настройки</li>
        </ul>
        <div class="side-tools">
          <button class="info-trigger" id="infoTrigger" title="Полезная информация">
            <span class="info-trigger-icon">?</span>
            <span class="info-trigger-label">FAQ</span>
          </button>
        </div>
        <div class="socials">
          <a href="https://t.me/lkwebdev" target="_blank" rel="noreferrer">Telegram</a>
          <a href="https://discord.gg/jNKZdGYc" target="_blank" rel="noreferrer">Discord</a>
        </div>
      </nav>
      <main class="main-panel">
        <div class="window-controls">
          <button class="window-btn" id="windowMinimize" title="Свернуть">&#9472;</button>
          <button class="window-btn window-btn-icon" id="windowFullscreen" title="Во весь экран">
            <span class="icon-expand" aria-hidden="true"></span>
          </button>
          <button class="window-btn close" id="windowClose" title="Закрыть">&#10005;</button>
        </div>
        <div class="sync-indicator" id="syncIndicator" hidden>
          <span class="progress-spinner" aria-hidden="true"></span>
          <span id="syncIndicatorText">Синхронизация модов...</span>
        </div>
        <section class="panel panel-play active" data-panel="play">
          <div class="stat-card">
            <div>
              <p class="stat-label">Leo Launcher</p>
              <p class="stat-value" id="statusTitle">Готов к старту</p>
              <p class="stat-subtitle" id="statusSubtitle">Все системы готовы.</p>
              <p class="stat-message" id="statusMessage"></p>
            </div>
            <div class="status-pill status-ok" id="statusTag">Готов</div>
          </div>
          <div class="card servers-card">
            <header>
              <p class="section-title">Leo Forge</p>
              <button class="ghost" id="copyIp">Скопировать IP</button>
            </header>
            <div class="server-info">
              <div>
                <p class="muted">Адрес</p>
                <p class="server-ip" id="serverAddress">0.0.0.0</p>
              </div>
              <div>
                <p class="muted">Версия</p>
                <p class="server-version" id="serverVersion">1.20.1 Forge</p>
              </div>
              <div>
                <p class="muted">Моды</p>
                <p class="server-version"><span id="modsCount">0</span> шт.</p>
              </div>
            </div>
          </div>
          <div class="card launch-card">
            <header>
              <p class="section-title">Запуск</p>
              <p class="muted">Введите ник и стартуйте</p>
            </header>
            <div class="launch-grid">
              <div class="field">
                <label>Ник</label>
                <input id="username" type="text" placeholder="Player" />
                <p class="input-error" id="usernameError" hidden></p>
              </div>
              <button class="primary" id="launchBtn">Запустить игру</button>
            </div>
          </div>
          <div class="card mods-card">
            <header>
              <p class="section-title">Обязательные моды</p>
              <button class="ghost" id="openMods">Папка mods</button>
            </header>
            <p class="mods-progress-text" id="modsProgressText" hidden>Синхронизация...</p>
            <ul class="mods-list" id="modsSummary"></ul>
          </div>
        </section>

        <section class="panel panel-mods" data-panel="mods">
          <div class="card">
            <header class="mods-header">
              <div>
                <p class="section-title">Статус модов</p>
                <p class="muted">Синхронизация модов</p>
              </div>
              <div class="mod-actions">
                <button class="ghost" id="reinstallModsBtn">Переустановить все моды</button>
                <button class="ghost danger" id="deleteAllModsBtn">Удалить все</button>
              </div>
            </header>
            <ul class="mods-list detailed" id="modsList"></ul>
          </div>
        </section>

        <section class="panel panel-settings" data-panel="settings">
          <div class="card">
            <header>
              <p class="section-title">Параметры запуска</p>
            </header>
            <div class="form-grid">
              <div class="field memory-field">
                <label>Память для Minecraft</label>
                <input type="range" id="memorySlider" min="3" max="8" step="0.5" value="4" />
                <div class="memory-indicators">
                  <span>Мин: <strong id="minMemLabel">2 ГБ</strong></span>
                  <span>Макс: <strong id="maxMemLabel">4 ГБ</strong></span>
                </div>
                <p class="muted small">Ползунок учитывает доступную оперативную память.</p>
              </div>
            </div>
            <input type="hidden" id="minMem" value="2G" />
            <input type="hidden" id="maxMem" value="4G" />
            <div class="settings-actions">
              <button class="ghost danger settings-action" id="forceEngineBtn">
                Переустановить компоненты лаунчера
              </button>
              <button class="ghost secondary settings-action" id="cancelEngineBtn" hidden>
                Отменить установку
              </button>
            </div>
          </div>
          <div class="card log-card">
            <header>
              <p class="section-title">Логи</p>
              <button class="ghost" id="clearLog">Очистить</button>
            </header>
            <div class="log" id="logView"></div>
          </div>
        </section>
      </main>
    </div>
    <div class="engine-modal" id="engineModal">
      <div class="engine-modal-content">
        <h2>Необходима установка компонентов</h2>
        <p id="engineStatusText">
          Чтобы продолжить, установите дополнительные файлы лаунчера. Они могут перезаписать часть текущей установки Minecraft.
        </p>
        <div class="engine-progress" id="engineProgressModal" hidden>
          <div class="engine-progress-track">
            <div class="engine-progress-fill" id="engineProgressModalFill"></div>
          </div>
          <p class="engine-progress-label" id="engineProgressModalText">0%</p>
        </div>
        <div class="engine-modal-actions">
          <button class="primary" id="engineInstallBtn">Установить</button>
          <button class="ghost" id="engineExitBtn">Выйти</button>
        </div>
      </div>
    </div>
    <div class="engine-modal" id="infoModal">
      <div class="engine-modal-content info-modal-content">
        <h2>FAQ и подсказки</h2>
        <ul class="info-list">
          <li>
            <h3>Игра не запускается?</h3>
            <p>Чаще всего помогает установка Java 17. Скачайте дистрибутив, установите и перезапустите лаунчер.</p>
            <button class="ghost mini" id="infoJavaBtn">Скачать Java 17</button>
          </li>
          <li>
            <h3>После установки компонентов ничего не происходит</h3>
            <p>Проверьте, что лаунчер завершил установку модов и перезапустите игру через кнопку «Запустить игру».</p>
          </li>
        </ul>
        <div class="engine-modal-actions">
          <button class="primary" id="infoCloseBtn">Закрыть</button>
        </div>
      </div>
    </div>
    <div class="boot-overlay visible" id="bootOverlay">
      <div class="boot-overlay-content">
        <div class="boot-spinner"></div>
        <p id="bootOverlayText">Подготовка лаунчера...</p>
      </div>
    </div>
    <div class="boot-overlay" id="updateOverlay">
      <div class="boot-overlay-content">
        <div class="boot-spinner"></div>
        <p id="updateOverlayText">Проверка обновлений...</p>
      </div>
    </div>
    <div class="engine-modal" id="confirmModal">
      <div class="engine-modal-content">
        <h2 id="confirmTitle">Подтверждение</h2>
        <p id="confirmMessage">Вы уверены?</p>
        <div class="engine-modal-actions">
          <button class="ghost secondary" id="confirmCancelBtn">Отмена</button>
          <button class="primary danger" id="confirmOkBtn">Удалить</button>
        </div>
      </div>
    </div>
    <script src="app.js"></script>
  </body>
</html>
